// Generated by Haxe 3.4.2 (git build master @ 890f8c7)
(function () { "use strict";
function $extend(from, fields) {
	function Inherit() {} Inherit.prototype = from; var proto = new Inherit();
	for (var name in fields) proto[name] = fields[name];
	if( fields.toString !== Object.prototype.toString ) proto.toString = fields.toString;
	return proto;
}
Math.__name__ = true;
var com_abstractProgrammingCourse_Enemy = function() {
	PIXI.Container.call(this);
	var triangle = new com_abstractProgrammingCourse_TriangleIso();
	this.addChild(triangle);
	triangle.setHeight(40);
	triangle.setBase(30);
	triangle.setColor(255);
};
com_abstractProgrammingCourse_Enemy.__name__ = true;
com_abstractProgrammingCourse_Enemy.__super__ = PIXI.Container;
com_abstractProgrammingCourse_Enemy.prototype = $extend(PIXI.Container.prototype,{
});
var com_abstractProgrammingCourse_Geometry = function() {
	this._height = 2;
	this.color = 16711680;
	this._lineColor = 16777215;
	this.lineThickness = 1;
	PIXI.Graphics.call(this);
};
com_abstractProgrammingCourse_Geometry.__name__ = true;
com_abstractProgrammingCourse_Geometry.__super__ = PIXI.Graphics;
com_abstractProgrammingCourse_Geometry.prototype = $extend(PIXI.Graphics.prototype,{
	draw: function() {
	}
	,setHeight: function(pHeight) {
		this._height = pHeight;
		this.draw();
	}
	,setLineThickness: function(pThickness) {
		this.lineThickness = pThickness;
		this.draw();
	}
	,setLineColor: function(pLineColor) {
		this._lineColor = pLineColor;
		this.draw();
	}
	,setColor: function(pColor) {
		this.color = pColor;
		this.draw();
	}
});
var com_abstractProgrammingCourse_Main = function() {
	this.speedY = 10;
	this.speedX = 10;
	this.enemy = new com_abstractProgrammingCourse_Enemy();
	this.player = new com_abstractProgrammingCourse_Player();
	this.renderer = PIXI.autoDetectRenderer(960,640,{ backgroundColor : 0});
	window.document.body.appendChild(this.renderer.view);
	this.stage = new PIXI.Container();
	this.stage.addChild(this.player);
	this.player.x = 480.;
	this.player.y = 320.;
	this.stage.addChild(this.enemy);
	var tmp = Math.random();
	this.enemy.x = tmp * 960;
	var tmp1 = Math.random();
	this.enemy.y = tmp1 * 640;
	window.requestAnimationFrame($bind(this,this.gameLoop));
};
com_abstractProgrammingCourse_Main.__name__ = true;
com_abstractProgrammingCourse_Main.main = function() {
	com_abstractProgrammingCourse_Main.getInstance();
};
com_abstractProgrammingCourse_Main.getInstance = function() {
	if(com_abstractProgrammingCourse_Main.instance == null) {
		com_abstractProgrammingCourse_Main.instance = new com_abstractProgrammingCourse_Main();
	}
	return com_abstractProgrammingCourse_Main.instance;
};
com_abstractProgrammingCourse_Main.prototype = {
	gameLoop: function() {
		window.requestAnimationFrame($bind(this,this.gameLoop));
		this.renderer.render(this.stage);
		this.enemy.x += this.speedX;
		if(this.enemy.x > 960) {
			this.speedX = -10;
		} else if(this.enemy.x < 0) {
			this.speedX = 10;
		}
		this.enemy.y += this.speedY;
		if(this.enemy.y > 640) {
			this.speedY = -10;
		} else if(this.enemy.y < 0) {
			this.speedY = 10;
		}
		this.enemy.rotation = Math.atan2(this.speedY,this.speedX);
		var mousePosition = this.renderer.plugins.interaction.mouse.global;
		var playerToMouse = new PIXI.Point(mousePosition.x - this.player.x,mousePosition.y - this.player.y);
		this.player.canon.rotation = Math.atan2(playerToMouse.y,playerToMouse.x);
	}
	,destroy: function() {
		com_abstractProgrammingCourse_Main.instance = null;
	}
};
var com_abstractProgrammingCourse_Player = function() {
	this.canon = new com_abstractProgrammingCourse_Rectangle();
	PIXI.Container.call(this);
	var baseSquare = new com_abstractProgrammingCourse_Square();
	this.addChild(baseSquare);
	baseSquare.setHeight(40);
	this.addChild(this.canon);
	this.canon.setHeight(10);
	this.canon.setWidth(60);
	var square = new com_abstractProgrammingCourse_Square();
	this.canon.addChild(square);
	square.setHeight(10);
	square.x = this.canon.getWidth() / 2;
	square.setColor(65280);
};
com_abstractProgrammingCourse_Player.__name__ = true;
com_abstractProgrammingCourse_Player.__super__ = PIXI.Container;
com_abstractProgrammingCourse_Player.prototype = $extend(PIXI.Container.prototype,{
});
var com_abstractProgrammingCourse_Rectangle = function() {
	this._width = 20;
	com_abstractProgrammingCourse_Geometry.call(this);
	this.draw();
};
com_abstractProgrammingCourse_Rectangle.__name__ = true;
com_abstractProgrammingCourse_Rectangle.__super__ = com_abstractProgrammingCourse_Geometry;
com_abstractProgrammingCourse_Rectangle.prototype = $extend(com_abstractProgrammingCourse_Geometry.prototype,{
	getHeight: function() {
		return this._height;
	}
	,getWidth: function() {
		return this._width;
	}
	,draw: function() {
		this.clear();
		this.beginFill(this.color);
		this.lineStyle(this.lineThickness,this._lineColor);
		var halfHeight = this._height / 2;
		var halfWidth = this._width / 2;
		this.moveTo(-halfWidth,-halfHeight);
		this.lineTo(halfWidth,-halfHeight);
		this.lineTo(halfWidth,halfHeight);
		this.lineTo(-halfWidth,halfHeight);
		this.endFill();
	}
	,setWidth: function(pWidth) {
		this._width = pWidth;
		this.draw();
	}
});
var com_abstractProgrammingCourse_Square = function() {
	com_abstractProgrammingCourse_Rectangle.call(this);
	this._width = this._height;
	this.draw();
};
com_abstractProgrammingCourse_Square.__name__ = true;
com_abstractProgrammingCourse_Square.__super__ = com_abstractProgrammingCourse_Rectangle;
com_abstractProgrammingCourse_Square.prototype = $extend(com_abstractProgrammingCourse_Rectangle.prototype,{
	setHeight: function(pHeight) {
		this._width = pHeight;
		com_abstractProgrammingCourse_Rectangle.prototype.setHeight.call(this,pHeight);
	}
	,setWidth: function(pWidth) {
		this._height = pWidth;
		com_abstractProgrammingCourse_Rectangle.prototype.setWidth.call(this,pWidth);
	}
});
var com_abstractProgrammingCourse_TriangleIso = function() {
	this.base = 100;
	com_abstractProgrammingCourse_Geometry.call(this);
};
com_abstractProgrammingCourse_TriangleIso.__name__ = true;
com_abstractProgrammingCourse_TriangleIso.__super__ = com_abstractProgrammingCourse_Geometry;
com_abstractProgrammingCourse_TriangleIso.prototype = $extend(com_abstractProgrammingCourse_Geometry.prototype,{
	draw: function() {
		this.clear();
		this.beginFill(this.color);
		this.lineStyle(this.lineThickness,this._lineColor);
		var halfBase = this.base / 2;
		var half_height = this._height / 2;
		this.moveTo(-half_height,-halfBase);
		this.lineTo(half_height,0);
		this.lineTo(-half_height,halfBase);
		this.endFill();
	}
	,setBase: function(pBase) {
		this.base = pBase;
		this.draw();
	}
});
var js_Boot = function() { };
js_Boot.__name__ = true;
js_Boot.__string_rec = function(o,s) {
	if(o == null) {
		return "null";
	}
	if(s.length >= 5) {
		return "<...>";
	}
	var t = typeof(o);
	if(t == "function" && (o.__name__ || o.__ename__)) {
		t = "object";
	}
	switch(t) {
	case "function":
		return "<function>";
	case "object":
		if(o instanceof Array) {
			if(o.__enum__) {
				if(o.length == 2) {
					return o[0];
				}
				var str = o[0] + "(";
				s += "\t";
				var _g1 = 2;
				var _g = o.length;
				while(_g1 < _g) {
					var i = _g1++;
					if(i != 2) {
						str += "," + js_Boot.__string_rec(o[i],s);
					} else {
						str += js_Boot.__string_rec(o[i],s);
					}
				}
				return str + ")";
			}
			var l = o.length;
			var i1;
			var str1 = "[";
			s += "\t";
			var _g11 = 0;
			var _g2 = l;
			while(_g11 < _g2) {
				var i2 = _g11++;
				str1 += (i2 > 0 ? "," : "") + js_Boot.__string_rec(o[i2],s);
			}
			str1 += "]";
			return str1;
		}
		var tostr;
		try {
			tostr = o.toString;
		} catch( e ) {
			return "???";
		}
		if(tostr != null && tostr != Object.toString && typeof(tostr) == "function") {
			var s2 = o.toString();
			if(s2 != "[object Object]") {
				return s2;
			}
		}
		var k = null;
		var str2 = "{\n";
		s += "\t";
		var hasp = o.hasOwnProperty != null;
		for( var k in o ) {
		if(hasp && !o.hasOwnProperty(k)) {
			continue;
		}
		if(k == "prototype" || k == "__class__" || k == "__super__" || k == "__interfaces__" || k == "__properties__") {
			continue;
		}
		if(str2.length != 2) {
			str2 += ", \n";
		}
		str2 += s + k + " : " + js_Boot.__string_rec(o[k],s);
		}
		s = s.substring(1);
		str2 += "\n" + s + "}";
		return str2;
	case "string":
		return o;
	default:
		return String(o);
	}
};
var $_, $fid = 0;
function $bind(o,m) { if( m == null ) return null; if( m.__id__ == null ) m.__id__ = $fid++; var f; if( o.hx__closures__ == null ) o.hx__closures__ = {}; else f = o.hx__closures__[m.__id__]; if( f == null ) { f = function(){ return f.method.apply(f.scope, arguments); }; f.scope = o; f.method = m; o.hx__closures__[m.__id__] = f; } return f; }
String.__name__ = true;
Array.__name__ = true;
com_abstractProgrammingCourse_Main.WIDTH = 960;
com_abstractProgrammingCourse_Main.HEIGHT = 640;
com_abstractProgrammingCourse_Main.main();
})();
